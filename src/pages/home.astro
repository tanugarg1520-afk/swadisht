---
import BaseLayout from "@/layouts/BaseLayout.astro";
import DishCard from "@/components/DishCard";
import AddressBar from "@/components/AddressBar";
import { buttonVariants } from "@/components/ui/button";
import { Search, ChefHat, TrendingUp, Map, Bookmark, ShoppingCart, Clock } from "lucide-react";
---

<BaseLayout
  title="Home - Swadisht"
  description="Welcome to your Swadisht dashboard. Browse our menu, track your orders, and enjoy delicious food."
>
  <!-- Welcome Section -->
  <section class="bg-accent/50 py-10">
    <div class="container">
      <div class="flex flex-col gap-6">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
          <div>
            <h1 class="text-3xl font-bold font-display mb-2">Welcome, User!</h1>
            <p class="text-muted-foreground">What would you like to order today?</p>
          </div>
          <div class="relative w-full max-w-xs">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <Search class="h-5 w-5 text-muted-foreground" />
            </div>
            <input 
              type="text" 
              placeholder="Search dishes..." 
              class="pl-10 pr-4 py-2 w-full border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
            />
          </div>
        </div>
        
        <!-- Delivery Address Bar -->
        <AddressBar 
          client:load 
          address="Sector 12, New Delhi, 110085"
        />
      </div>
    </div>
  </section>

  <div class="container py-8">
    <!-- Quick Links -->
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-10">
      <a href="/menu?category=light" class="bg-white p-4 rounded-xl border border-accent shadow-sm flex flex-col items-center text-center hover:shadow-md transition-shadow">
        <div class="bg-primary/10 p-3 rounded-full mb-3">
          <ChefHat class="h-6 w-6 text-primary" />
        </div>
        <span class="font-medium font-display">Light Dishes</span>
      </a>
      <a href="/menu?category=heavy" class="bg-white p-4 rounded-xl border border-accent shadow-sm flex flex-col items-center text-center hover:shadow-md transition-shadow">
        <div class="bg-primary/10 p-3 rounded-full mb-3">
          <ChefHat class="h-6 w-6 text-primary" />
        </div>
        <span class="font-medium font-display">Heavy Dishes</span>
      </a>
      <a href="/menu?category=meals" class="bg-white p-4 rounded-xl border border-accent shadow-sm flex flex-col items-center text-center hover:shadow-md transition-shadow">
        <div class="bg-primary/10 p-3 rounded-full mb-3">
          <ChefHat class="h-6 w-6 text-primary" />
        </div>
        <span class="font-medium font-display">Meals</span>
      </a>
      <a href="/offers" class="bg-white p-4 rounded-xl border border-accent shadow-sm flex flex-col items-center text-center hover:shadow-md transition-shadow">
        <div class="bg-primary/10 p-3 rounded-full mb-3">
          <TrendingUp class="h-6 w-6 text-primary" />
        </div>
        <span class="font-medium font-display">Offers</span>
      </a>
    </div>

    <!-- Previous Order Status -->
    <div class="mb-10 bg-white p-6 rounded-xl border border-accent shadow-sm">
      <h2 class="text-xl font-bold font-display mb-4 flex items-center gap-2">
        <Clock class="h-5 w-5 text-primary" /> Recent Order
      </h2>
      
      <div class="bg-muted p-4 rounded-lg">
        <div class="flex flex-col md:flex-row justify-between gap-4">
          <div>
            <p class="text-sm text-muted-foreground mb-1">Order #12345</p>
            <h3 class="font-medium">Butter Chicken, Garlic Naan, Jeera Rice</h3>
            <p class="text-muted-foreground text-sm mt-1">Ordered: Today, 2:30 PM</p>
          </div>
          <div class="flex items-center gap-4">
            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">
              In Transit
            </span>
            <a href="/order/12345" class={buttonVariants({ variant: 'outline', size: 'sm' })}>
              Track Order
            </a>
          </div>
        </div>
        
        <div class="mt-6">
          <div class="relative">
            <div class="absolute w-full h-2 bg-muted-foreground/20 rounded-full"></div>
            <div class="absolute w-3/4 h-2 bg-primary rounded-full"></div>
          </div>
          <div class="flex justify-between mt-2 text-xs">
            <span>Order Placed</span>
            <span>Preparing</span>
            <span class="text-primary font-medium">In Transit</span>
            <span class="text-muted-foreground">Delivered</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Popular Dishes -->
    <div class="mb-10">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-display font-semibold">Popular This Week</h2>
        <a 
          href="/menu" 
          class="text-primary text-sm font-medium hover:underline"
        >
          View All
        </a>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <DishCard 
          client:load
          name="Butter Chicken"
          description="Tender chicken cooked in a rich tomato and butter gravy with aromatic spices."
          price={260}
          imageUrl="https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=600&auto=format&fit=crop&q=80"
          isVeg={false}
          calories={450}
          rating={4.9}
        />
        <DishCard 
          client:load
          name="Paneer Tikka"
          description="Marinated cottage cheese cubes grilled to perfection with bell peppers and onions."
          price={180}
          imageUrl="https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=600&auto=format&fit=crop&q=80" 
          isVeg={true}
          calories={320}
          rating={4.5}
        />
        <DishCard 
          client:load
          name="Chicken Biryani"
          description="Fragrant basmati rice cooked with tender chicken pieces and aromatic spices."
          price={280}
          imageUrl="https://images.unsplash.com/photo-1589302168068-964664d93dc0?w=600&auto=format&fit=crop&q=80"
          isVeg={false}
          calories={520}
          rating={4.8}
        />
        <DishCard 
          client:load
          name="Vegetable Samosa"
          description="Crispy pastry filled with spiced potatoes and peas, served with mint chutney."
          price={80}
          imageUrl="https://images.unsplash.com/photo-1601050690597-df0568f70950?w=600&auto=format&fit=crop&q=80"
          isVeg={true}
          calories={220}
          rating={4.7}
        />
      </div>
    </div>

    <!-- Nearby Restaurants -->
    <div>
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-display font-semibold">Nearby Restaurants</h2>
        <a 
          href="/restaurants" 
          class="text-primary text-sm font-medium hover:underline"
        >
          View All
        </a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Restaurant Card 1 -->
        <div class="bg-white rounded-xl border border-accent overflow-hidden shadow-sm hover:shadow-md transition-shadow">
          <div class="flex">
            <img 
              src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=600&auto=format&fit=crop&q=80" 
              alt="Spice Garden Restaurant" 
              class="w-1/3 h-32 object-cover"
            />
            <div class="p-4 flex-1">
              <div class="flex justify-between mb-1">
                <h3 class="font-display font-semibold">Spice Garden</h3>
                <div class="flex items-center gap-1">
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    class="h-4 w-4 text-yellow-500" 
                    fill="currentColor" 
                    viewBox="0 0 24 24"
                  >
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                  </svg>
                  <span class="text-sm font-medium">4.8</span>
                </div>
              </div>
              <p class="text-muted-foreground text-xs mb-2">North Indian, Chinese</p>
              <div class="flex items-center text-xs text-muted-foreground mb-3">
                <Map class="h-3 w-3 mr-1" /> 1.2 km away • 25-30 min delivery
              </div>
              <div class="flex gap-2">
                <a href="/restaurant/1" class={buttonVariants({ variant: 'outline', size: 'sm' })}>
                  View Menu
                </a>
                <button class={buttonVariants({ variant: 'ghost', size: 'sm' })}>
                  <Bookmark class="h-4 w-4" />
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Restaurant Card 2 -->
        <div class="bg-white rounded-xl border border-accent overflow-hidden shadow-sm hover:shadow-md transition-shadow">
          <div class="flex">
            <img 
              src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=600&auto=format&fit=crop&q=80" 
              alt="Tandoor House Restaurant" 
              class="w-1/3 h-32 object-cover"
            />
            <div class="p-4 flex-1">
              <div class="flex justify-between mb-1">
                <h3 class="font-display font-semibold">Tandoor House</h3>
                <div class="flex items-center gap-1">
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    class="h-4 w-4 text-yellow-500" 
                    fill="currentColor" 
                    viewBox="0 0 24 24"
                  >
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                  </svg>
                  <span class="text-sm font-medium">4.6</span>
                </div>
              </div>
              <p class="text-muted-foreground text-xs mb-2">Indian, Mughlai</p>
              <div class="flex items-center text-xs text-muted-foreground mb-3">
                <Map class="h-3 w-3 mr-1" /> 2.5 km away • 30-35 min delivery
              </div>
              <div class="flex gap-2">
                <a href="/restaurant/2" class={buttonVariants({ variant: 'outline', size: 'sm' })}>
                  View Menu
                </a>
                <button class={buttonVariants({ variant: 'ghost', size: 'sm' })}>
                  <Bookmark class="h-4 w-4" />
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Nav -->
  <div class="fixed bottom-0 left-0 right-0 bg-white border-t py-2 z-40 md:hidden">
    <div class="flex justify-around">
      <a href="/home" class="flex flex-col items-center text-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        <span class="text-xs mt-1">Home</span>
      </a>
      <a href="/menu" class="flex flex-col items-center text-muted-foreground">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="3" r="1"/><circle cx="19" cy="4" r="1"/><circle cx="5" cy="4" r="1"/><circle cx="12" cy="20" r="1"/><path d="M5 4a16 16 0 0 0 0 16"/><path d="M19 4a16 16 0 0 1 0 16"/><path d="M12 3v17"/></svg>
        <span class="text-xs mt-1">Menu</span>
      </a>
      <a href="/cart" class="flex flex-col items-center text-muted-foreground">
        <ShoppingCart class="h-5 w-5" />
        <span class="text-xs mt-1">Cart</span>
      </a>
      <a href="/orders" class="flex flex-col items-center text-muted-foreground">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg>
        <span class="text-xs mt-1">Orders</span>
      </a>
      <a href="/profile" class="flex flex-col items-center text-muted-foreground">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        <span class="text-xs mt-1">Profile</span>
      </a>
    </div>
  </div>
</BaseLayout>
---
import { buttonVariants } from "@/components/ui/button";
import Logo from "@/components/Logo";
import UserProfileHeader from "@/components/UserProfileHeader";

// In a real app, this would be determined by authentication state
// For demo purposes, we'll use a URL param to simulate login state
const isLoggedIn = Astro.url.pathname.includes('/home');
---

<header
  class="bg-background/95 supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full border-b backdrop-blur"
>
  <div
    class="container flex h-16 items-center space-x-4 sm:justify-between sm:space-x-0"
  >
    <div class="flex gap-6 md:gap-10">
      <a href="/" class="flex items-center space-x-2">
        <Logo size="md" />
      </a>
    </div>
    <div class="flex flex-1 items-center justify-end space-x-4">
      <nav class="hidden md:flex items-center space-x-1">
        <a
          href="/"
          class={buttonVariants({ variant: 'ghost' })}
        >
          Home
        </a>
        <a
          href="/menu"
          class={buttonVariants({ variant: 'ghost' })}
        >
          Menu
        </a>
        <a
          href="/offers"
          class={buttonVariants({ variant: 'ghost' })}
        >
          Offers
        </a>
        {isLoggedIn ? (
          <UserProfileHeader client:load userName="John Doe" userAddress="Sector 12, New Delhi, 110085" />
        ) : (
          <>
            <a
              href="/"
              class={buttonVariants({ variant: 'outline' })}
            >
              Login
            </a>
            <a
              href="/"
              class={buttonVariants({ variant: 'default' })}
            >
              Sign Up
            </a>
          </>
        )}
      </nav>
      <button class="md:hidden p-2" aria-label="Menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
      </button>
    </div>
  </div>
</header>
